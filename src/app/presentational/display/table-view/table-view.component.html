<ion-content [fullscreen]="true">
  <ion-card>
    <ion-card-content class="scroll">
      <div class="scroll">
        <ion-item>
        <ion-input  (keyup)="applyfilter($event.target.value)" placeholder="Filter Records Here"></ion-input>
        </ion-item>
        <ion-item class="columnHeaderChoiceSize">
              <ion-label>Column choices</ion-label>
              <ion-select [formControl]="columnOptions" multiple (blur)=" applyColumnFilter()">
                <ion-select-option *ngFor="let choice of columnChoices" [value]="choice.value">{{choice.value}}</ion-select-option>
              </ion-select>
        </ion-item>
          <ion-item>
            <table mat-table id="task-table" [dataSource]="dataSource"  matSort >

              <!-- Position Column -->
              <ng-container matColumnDef="title" sticky>
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Title </th>
                <td mat-cell *matCellDef="let tasks"> {{tasks.title}}
              </ng-container>

              <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Description </th>
                <td mat-cell *matCellDef="let tasks" > {{tasks.description}} </td>
              </ng-container>

              <ng-container matColumnDef="day">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Day </th>
                <td mat-cell *matCellDef="let tasks"> {{tasks.day}} </td>
              </ng-container>

              <ng-container matColumnDef="minutes">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Minutes </th>
                <td mat-cell *matCellDef="let tasks"  > {{tasks.minutes}} </td>
              </ng-container>

              <ng-container matColumnDef="priority">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Priority </th>
                <td mat-cell *matCellDef="let tasks" > {{importanceDifficultyFormat('importance', tasks.priority)}} </td>
              </ng-container>

              <ng-container matColumnDef="difficulty">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Difficulty </th>
                <td mat-cell *matCellDef="let tasks"> {{importanceDifficultyFormat('difficulty', tasks.difficulty)}} </td>
              </ng-container>
              
              <ng-container matColumnDef="urgency">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Urgency </th>
                <td mat-cell *matCellDef="let tasks"> {{importanceDifficultyFormat('urgency', tasks.urgency)}} </td>
              </ng-container>

              <ng-container matColumnDef="resource">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Resource </th>
                  <td mat-cell *matCellDef="let tasks"> {{tasks.resource}} </td>
                </ng-container>

                <ng-container matColumnDef="completed">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Done? </th>
                  <td mat-cell *matCellDef="let tasks"> 
                    <ng-container *ngIf="tasks.completed; else incomplete">
                    DONE  <br/>
                    <span [style.font-size.em]=".7">{{formatDate(tasks.completedDate)}}</span>
                    </ng-container>
                    <ng-template #incomplete>
                      NOT DONE
                    </ng-template>
                  </td>
                  </ng-container>
                    <ng-container matColumnDef="details">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> Details </th>
                      <td mat-cell *matCellDef="let tasks">
                        <ion-icon (click) = "editZoom(tasks)" class="edit" name="search">
                        
                        </ion-icon>
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="complete">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> Complete </th>
                      <td mat-cell *matCellDef="let tasks">
                        <ng-container *ngIf="tasks.completed; else incomplete2">
                          <ion-icon (click)="markComplete(tasks)" class="edit">check_circle</ion-icon>
                        </ng-container>
                        <ng-template #incomplete2>
                          <ion-icon (click)="markComplete(tasks)" class="edit" name="checkbox-outline"></ion-icon>
                        </ng-template>
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="delete">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> Delete </th>
                      <td mat-cell *matCellDef="let tasks"> 
                        <ion-icon (click)="delete(tasks)" class="delete" name="trash-outline"></ion-icon>
                    </td>
                    </ng-container>
              

              <tr mat-header-row *matHeaderRowDef="taskColumns sticky: true"></tr>
              <tr mat-row *matRowDef="let row; columns: taskColumns;"></tr>
            </table>
            <mat-paginator  #paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 20, 50, 100]" showFirstLastButtons></mat-paginator>
        </ion-item>
      </div>
    </ion-card-content>
  </ion-card>

</ion-content>
